{% extends 'docs/extends/base.html' %}

{% block additionalCSS %}
<style>
	@keyframes etincelleSize {
  		0% {
    		transform: scale(1);
    		opacity: .6;
  		}
  		100% {
    		transform: scale(.5);
    		opacity: 1;
  		}
	}

	@keyframes reduceMeche {
		0% {
			transform: rotate(0);
		}
		80% {
			transform: rotate(-65deg);
		}
		100% {
			transform: rotate(-65deg) translateX(-14px) scale(.7);
		}
	}

	@keyframes toRed {
		to {
			fill: #a42c2c;
		}
	}

	@keyframes bomb {
		80% {
			transform :rotate(-15deg) translateZ(0);
		}
		81% {
			transform :rotate(-15deg) scale(6) translate(8px, 23px);
		}
		100% {
			transform :rotate(-15deg) scale(6) translate(8px, 23px);
			fill: red;
		}
	}

	/* ETINCELLES */ 
	.run #etincelle-rouge,
	.run #etincelle-jaune {
		transform-origin: 180px 16px;
		animation-name: etincelleSize;
		animation-direction: alternate;
		animation-iteration-count: infinite;
	}

	.run #etincelle-jaune {
		animation-duration: 150ms, 400ms;
	}
	.run #etincelle-rouge {
		animation-duration: 250ms, 400ms;
	}

	/* MECHE */
	.run #meche {
		transform-origin: 191px 49px;
		animation: 5s ease-in 1 forwards reduceMeche ;
	}

	.run #corps {
		fill: black;
		animation: 2s steps(8, end) 4.5s 1 forwards toRed;
	}

	.run #bomb {
		transform-origin: 173px 140px;
		animation: 9s ease-in 1 forwards bomb;
	}
</style>
{% endblock %}

{% block header_title %}{% endblock %}


{% block main %}


<h1>
	{% include 'docs/includes/logo-amorce.svg' %}
</h1>


<p>
	Amorce est un <em>style-agnostic</em> starter kit pour l'intégration de site internet. <br/>
	Il propose :
</p>

<ul>
	<li> Un Framework CSS (reset, typo, forms, utils, grid) découpé en modules.</li>
	<li> Une documentation qu'il suffit de faire évoluer en style guide pour chaque projet.</li>
	<li> Une série de task grunt 
		<ul>
			<li> <a href="http://cssnext.io/">cssnext</a> (compilation du code CSS4 en CSS3)</li>
			<li> <a href="http://mozilla.github.io/nunjucks/">nunjucks</a> (language de templating inspiré de <em>Jinja</em>)</li>
			<li> svgmin (Optimisation des images SVG)</li>
			<li> webfont (génération de webfont à partir d'un dossier d'icons SVG)</li>
			<li> modernizr </li>
			<li> … </li>
		</ul>
	</li>	
</ul>

<h2> Requirements </h2>

<ul>
	<li>Le projet utilise le <em>task runner</em> <a href="http://gruntjs.com/">GRUNT</a>.</li>
	<li><em>Grunt</em> nécessite <a href="https://nodejs.org/">nodeJS</a> >= 4.4.3.</li>
</ul>

<p>
	Pour plus de détails pour l'installation sur votre machine : <a href="http://gruntjs.com/getting-started">Grunt getting started</a>
</p>

<h2> Getting started </h2>

<p>
	Depuis un shell ou une console (placé à la racine de votre projet), lancez les commandes suivantes :	
</p>

<ul>
	<li><code>npm install</code> pour télécharger et installer les paquets nodeJS nécessaires.</li>
	<li><code>grunt init</code> ou <code>grunt build</code> pour faire une compilation manuelle des sources.</li>
</ul>


<h2>Compilation à la volée</h2> 

<p>
	La commande <code>grunt</code> ou <code>grunt watch</code> est paramétrée pour lancer un <em>watcher</em> sur les fichiers sources. Ainsi à chaque modification d'un fichier source html ou css, les fichiers seront compilés à la volée.
</p>
<p>
	De plus un serveur <a href="http://livereload.com">livereload</a> est également lancé permettant de rafraichir votre browser à chaque modification.
	Pour en profiter, il suffit d'installer l'<a href="http://livereload.com/extensions/">extension Livereload</a> correspondant à votre navigateur.
	
</p>


<h2>Commandes de compilation manuelles</h2> 

<ul>
	<li>
		<code>grunt buildcss</code> : compile les fichiers CSS à l'aide de <a href="http://cssnext.io/">cssnext</a>.
	</li>
	<li>
		<code>grunt buildicons</code> : compile les fichiers <code>.svg</code> présents dans <code>src/static/img/icons/</code>`: optimisations des images et génération d'une font icons.
	</li>
	<li>
		<code>grunt buildhtml</code> : compile les fichiers sources <code>.html</code> qui utilise le sytem de templating _nunjucks_
	</li>
	<li>
		<code>grunt modernizr</code> : inspecte les fichiers CSS et JS du projet et compile un fichier <code>modernizr-custom.js</code>.
	</li>
	<li>
		<code>grunt builddocs</code> : compile les fichiers de la présente documentation
	</li>
</ul>

<p>
	Pour plus de précision, vous pouvez inspecter les fichiers <code>package.json</code> et <code>gruntfile.js</code>.
</p>

{% endblock %}


{% block additional_JS %}
<script>
(function($) {
	'use strict';

	$(document).ready(function($) {
		var logo = $('#logo');
		logo.addClass('run');
		logo.on('animationend', '#bomb', function(event) {
			// console.log(event.target.id);
			if (event.target.id === "bomb") {
				logo.removeClass('run');
			};
		});
	});


})(jQuery);
</script>


{% endblock %}
